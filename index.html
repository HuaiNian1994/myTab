<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Hi~~</title>
	<base target="_self"><!-- 所有链接默认在本页面打开 -->
	<link rel="icon" href="images/myIcon.png">
	<link rel="stylesheet" href="css/reset.css">
	<link rel="stylesheet" href="css/main.css">
	<link rel="stylesheet" href="independent_modules/weather/weather.css">
</head>

<body style="opacity: 0">
	<header>
		<aside id="independent">
			<span id="clock"></span>
			<aside id="weather">
				<span id="paint">&#xe9ba;</span>
				<span id="temperature">0℃</span>
				<span id="state"> Loading...</span>
			</aside>
		</aside>
		<form id="search_father" action="https://www.google.com/search?" method="get">
			<span>&#xe8f0;</span>
			<ul class="engines"></ul>
			<!-- 想要提交表单，要为相应元素设置name属性，控制键的生成。否则无法生成键值对中的键 -->
			<input type="text" id="search" autocomplete="off" name="q" placeholder="What do you want...?">
		</form>
	</header>

	<ul id="links">
		<li><a href="https://www.google.com/ncr" style="background:url('images/google.png') 50% 50%/cover;"></a>
		</li>
		<li><a href="https://github.com/" style="background:url('images/github.png') 50% 50%/cover;"></a></li>
		<li><a href="http://www.w3school.com.cn/" style="background:url('images/w3school.png') 50% 50%/cover;"></a></li>
		<li><a href="https://developer.mozilla.org/zh-CN/" style="background:url('images/MDN.png') 50% 50%/cover;"></a>
		</li>
		<li><a href="http://www.runoob.com/" style="background:url('images/runoob.png') 50% 50%/cover;"></a></li>
		<li><a href="https://mp.weixin.qq.com/"
				style="background:url('images/wechat public platform.png') 50% 50%/cover;"></a></li>
		<li><a href="https://leetcode-cn.com/" style="background:url('images/LeetCode.png') 50% 50%/cover;"></a></li>
		<li><a href="https://www.baidu.com" style="background:url('images/baidu.png') 50% 50%/cover;"></a></li>

	</ul>


</body>
<script>
	//加载时页面淡入
	window.onload = () => {
		document.getElementsByTagName("body")[0].style.opacity = 1;
	}
	const engineList = {
		Bing: "&#xe9ac;",
		Yahoo: "&#xe61a;",
		baidu: "&#xe6b6;",
		github: "&#xe709;",
		google: "&#xe8f0;",
		wikipedia: "&#xe673;",
		sogou: "&#xe8c9;",
		mozilla: "&#xeccf;",
		duckduckgo: "&#xe62e;"
	}
	const searchLinks = {
		Bing: {
			link: "https://cn.bing.com/search?",
			query: "q"
		},
		Yahoo: {
			link: "https://us.search.yahoo.com/yhs/search?",
			query: "p"
		},
		baidu: {
			link: "https://www.baidu.com/s?",
			query: "wd"
		},
		github: {
			link: "https://github.com/search?",
			query: "q"
		},
		google: {
			link: "https://www.google.com/search?",
			query: "q"
		},
		wikipedia: {
			link: "https://en.wikipedia.org/wiki/Special:Search?",
			query: "search"
		},
		sogou: {
			link: "https://www.sogou.com/web?",
			query: "query"
		},
		mozilla: {
			link: "https://developer.mozilla.org/zh-CN/search?",
			query: "q"
		},
		duckduckgo: {
			link: "https://duckduckgo.com/?",
			query: "q"
		}
	}
	var enginesNode = document.getElementsByClassName("engines")[0];
	var search_fatherNode = document.getElementById("search_father");
	//创建节点
	for (key in engineList) {
		var node = document.createElement("li");
		node.setAttribute("engineName", key)
		node.innerHTML = engineList[key]
		node.className = "enginePic"
		enginesNode.appendChild(node);
	}

	//设定动画效果
	var glass = search_fatherNode.children[0];
	var timer = null;
	glass.onmouseover = () => {
		glass.style.color = "white";
	}
	glass.onclick = () => {
		enginesNode.style.opacity = 1;
		enginesNode.style.transform = "scaleX(1)";
	}
	glass.onmouseout = () => {
		glass.style.color = "rgb(155, 155, 155)";
		timer = setTimeout(() => {
			enginesNode.style.opacity = 0;
			enginesNode.style.transform = "scaleX(0)";
		}, 500);
	}
	enginesNode.onmouseover = () => {
		clearTimeout(timer);
		enginesNode.style.opacity = 1;
		enginesNode.style.transform = "scaleX(1)";
		glass.style.color = "white";
	}
	enginesNode.onmouseout = () => {
		glass.style.color = "rgb(155, 155, 155)";
		timer = setTimeout(() => {
			enginesNode.style.opacity = 0;
			enginesNode.style.transform = "scaleX(0)";
		}, 500);
	}

	//事件委托
	enginesNode.onclick = (e) => {
		if (e.target.className=="enginePic") {
			var engineName = e.target.getAttribute("enginename");
			search_fatherNode.action = searchLinks[engineName].link;
			glass.innerHTML = engineList[engineName]
			search_fatherNode.children[2].name = searchLinks[engineName].query;
		}
	}
</script>
<script src="independent_modules/clock/clock.js"></script>
<script src="independent_modules/weather/weather.js"></script>

</html>